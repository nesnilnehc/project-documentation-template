# ADR-001: 项目过程管理策略（混合模式）

**日期：** 2025-10-10  
**状态：** 已接受  
**决策者：** 项目核心团队  
**相关 Issue/PR：** -

## 背景和问题陈述

对于在多个代码托管平台（GitLab、GitHub、Gitea 等）上可能运行的项目，特别是开源项目，项目团队需要决定：

1. 如何管理项目任务和看板？
2. 如何确保平台迁移时不丢失项目管理数据？
3. 如何平衡平台特性利用和数据自主权？

## 考虑的方案

### 方案 1：完全使用平台 Issue/Project

**描述：**

- 所有任务管理使用 GitLab/GitHub 的 Issue 和 Project Board
- 不在 Git 仓库中保留项目管理数据

**优点：**

- ✅ 充分利用平台特性（自动化、通知、看板）
- ✅ 与 PR/MR 无缝集成
- ✅ 协作功能强大
- ✅ 符合业界标准实践

**缺点：**

- ❌ 平台锁定，迁移时数据可能丢失
- ❌ 依赖平台可用性
- ❌ 不同平台功能差异大
- ❌ 历史记录可能无法完整保留

### 方案 2：完全使用 Git 仓库管理

**描述：**

- 在 `docs/process-management/project-board/` 中维护所有任务和看板
- 使用 Markdown 文件记录项目管理信息，包括：
  - `backlog.md` - 待办事项
  - `in-progress.md` - 进行中
  - `done.md` - 已完成
  - `blocked.md` - 阻塞项
  - `cancelled.md` - 已取消
- 所有任务状态变更通过 Git 提交记录

**优点：**

- ✅ 完全平台无关
- ✅ 数据自主权
- ✅ 版本控制完整
- ✅ 简单透明

**缺点：**

- ❌ 缺乏自动化
- ❌ 无通知机制
- ❌ 协作功能有限
- ❌ 需要大量手动维护
- ❌ 违反标准文档管理实践

### 方案 3：混合模式（Git + 平台工具）⭐

**描述：**

- **Git 仓库**：存储战略性、长期的信息
  - 产品路线图（`roadmap/`）
  - 里程碑规划和归档（`archived/`）
  - 架构决策记录 ADR（`.doc-standards/docs/process-management/decisions/`）
  - 项目看板归档（可选，用于平台迁移时的备份）
  
- **平台工具**（GitLab/GitHub Issue 和 Project Board）：日常开发任务管理
  - 功能开发任务（Issue + Labels）
  - Bug 跟踪（Issue + Bug Label）
  - 代码审查讨论（Merge Request/Pull Request）
  - Sprint 看板（Project Board with Backlog/In Progress/Done）

**优点：**

- ✅ 核心信息不丢失（平台迁移友好）
- ✅ 充分利用平台特性
- ✅ 信息分层管理（战略 vs 战术）
- ✅ 避免重复维护
- ✅ 开发效率高

**缺点：**

- ❌ 需要维护两处（但工作量小）
- ❌ 需要团队理解和遵循规范

## 决策

选择了 **方案 3：混合模式（Git + 平台工具）**

### 决策理由

1. **平衡性最佳**
   - 既保证了平台迁移友好性，又能充分利用平台特性
   - 不会因为保留 Git 管理而牺牲开发效率

2. **符合实际使用场景**
   - 开源项目可能在不同平台运行或被 fork
   - 战略规划需要长期保留和版本控制
   - 日常开发需要平台工具的自动化能力

3. **信息分层清晰**
   - **战略层**（Git）：产品方向、架构决策 → 长期保留
   - **战术层**（平台）：日常任务、Bug 跟踪 → 临时性信息

4. **最小化维护成本**
   - 产品路线图和 ADR 更新频率低
   - 日常任务在平台管理，无需额外维护
   - 重大里程碑完成时才需要归档

## 后果

### 积极影响

- ✅ 平台迁移时核心信息不丢失
- ✅ 新贡献者能快速了解项目背景和规划
- ✅ 重要决策有完整的记录和追溯
- ✅ 日常开发效率不受影响
- ✅ 符合开源项目最佳实践

### 负面影响和风险

- ⚠️ 团队需要理解何时使用 Git，何时使用平台
  - **缓解措施：** 在 `process-management/README.md` 中明确说明

- ⚠️ 需要定期维护 Git 中的文档
  - **缓解措施：** 设定定期更新计划（每月/每版本）

- ⚠️ 可能存在信息不同步
  - **缓解措施：** Git 中只记录已决策的内容，平台中记录讨论过程

### 技术债务

无明显技术债务。如果未来发现混合模式维护成本过高，可以重新评估。

## 实施计划

建议的实施步骤：

1. [ ] 定期（每月/每版本）更新战略规划文档

## 验证标准

如何验证这个决策是否成功：

- ✅ 团队成员能清楚区分何时使用 Git vs 平台工具
- ✅ 战略规划文档得到定期更新（建议每月或每版本至少一次）
- ✅ 重大技术决策都有对应的 ADR 记录
- ✅ 平台迁移时能够快速恢复核心项目管理数据
- ✅ 新贡献者能通过 Git 文档快速了解项目方向和背景
- ✅ 日常开发任务管理效率没有降低

## 参考资料

- [架构决策记录（ADR）](https://adr.github.io/)
- [GitHub Projects Documentation](https://docs.github.com/en/issues/planning-and-tracking-with-projects)
- [GitLab Issue Boards](https://docs.gitlab.com/ee/user/project/issue_board.html)
- [文档管理最佳实践](https://www.writethedocs.org/guide/docs-as-code/)

## 相关 ADR

- 前置：无
- 后续：可能需要 ADR 来决定具体的平台迁移策略
- 替代：无

---

## 应用场景

本决策特别适用于以下类型的项目：

- ✅ **开源项目** - 可能被 fork 或迁移到不同平台
- ✅ **多平台项目** - 同时在多个代码托管平台维护
- ✅ **长期项目** - 需要保留完整的决策历史
- ✅ **团队协作项目** - 需要平衡文档沉淀和协作效率

## 更新记录

- 2025-10-10: 创建 ADR（通用版本）
- 2025-10-10: 状态更新为"已接受"
